<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>实战 3：动态渲染 .vue 文件的组件—— Display | wangjunget</title>
    <meta name="generator" content="VuePress 1.5.4">
    
    <meta name="description" content="">
    <link rel="preload" href="/assets/css/0.styles.db29028a.css" as="style"><link rel="preload" href="/assets/js/app.6215b15e.js" as="script"><link rel="preload" href="/assets/js/8.5391eac4.js" as="script"><link rel="preload" href="/assets/js/1.97d2ef8e.js" as="script"><link rel="preload" href="/assets/js/2.ac1a40e0.js" as="script"><link rel="preload" href="/assets/js/18.33cee044.js" as="script"><link rel="prefetch" href="/assets/js/10.8daf845c.js"><link rel="prefetch" href="/assets/js/11.d356f649.js"><link rel="prefetch" href="/assets/js/12.82e0c808.js"><link rel="prefetch" href="/assets/js/13.8dbe0cfe.js"><link rel="prefetch" href="/assets/js/14.7e2e1e0d.js"><link rel="prefetch" href="/assets/js/15.042ce427.js"><link rel="prefetch" href="/assets/js/16.3dde987c.js"><link rel="prefetch" href="/assets/js/17.a3e3731a.js"><link rel="prefetch" href="/assets/js/19.75cf190c.js"><link rel="prefetch" href="/assets/js/20.b9ef0e95.js"><link rel="prefetch" href="/assets/js/21.0ff2f763.js"><link rel="prefetch" href="/assets/js/22.7c801b38.js"><link rel="prefetch" href="/assets/js/23.70a3d8c1.js"><link rel="prefetch" href="/assets/js/24.2e18c1a2.js"><link rel="prefetch" href="/assets/js/25.f889a4da.js"><link rel="prefetch" href="/assets/js/26.83e16f41.js"><link rel="prefetch" href="/assets/js/27.ff212864.js"><link rel="prefetch" href="/assets/js/28.60b37242.js"><link rel="prefetch" href="/assets/js/29.bf515090.js"><link rel="prefetch" href="/assets/js/30.ed7dd467.js"><link rel="prefetch" href="/assets/js/31.47b33077.js"><link rel="prefetch" href="/assets/js/32.ba76e7dc.js"><link rel="prefetch" href="/assets/js/33.5525a510.js"><link rel="prefetch" href="/assets/js/34.90d7d140.js"><link rel="prefetch" href="/assets/js/35.17a7eaec.js"><link rel="prefetch" href="/assets/js/36.e7986737.js"><link rel="prefetch" href="/assets/js/37.c94c75f0.js"><link rel="prefetch" href="/assets/js/38.0fc9625d.js"><link rel="prefetch" href="/assets/js/39.bafb7ceb.js"><link rel="prefetch" href="/assets/js/4.51146437.js"><link rel="prefetch" href="/assets/js/40.696f6b54.js"><link rel="prefetch" href="/assets/js/41.d0f8ba33.js"><link rel="prefetch" href="/assets/js/42.176c81b4.js"><link rel="prefetch" href="/assets/js/43.90404dfa.js"><link rel="prefetch" href="/assets/js/44.c984d557.js"><link rel="prefetch" href="/assets/js/45.244d7a44.js"><link rel="prefetch" href="/assets/js/46.24d4f1f7.js"><link rel="prefetch" href="/assets/js/47.22e17342.js"><link rel="prefetch" href="/assets/js/48.2852021f.js"><link rel="prefetch" href="/assets/js/49.e4974845.js"><link rel="prefetch" href="/assets/js/5.70d658bb.js"><link rel="prefetch" href="/assets/js/50.b0dd72d9.js"><link rel="prefetch" href="/assets/js/51.7e78b2d2.js"><link rel="prefetch" href="/assets/js/52.35a5f466.js"><link rel="prefetch" href="/assets/js/53.0fcdb7e3.js"><link rel="prefetch" href="/assets/js/54.0c63a4fe.js"><link rel="prefetch" href="/assets/js/55.7f9e063d.js"><link rel="prefetch" href="/assets/js/56.624349bb.js"><link rel="prefetch" href="/assets/js/57.8f6294be.js"><link rel="prefetch" href="/assets/js/58.e1e5a8a1.js"><link rel="prefetch" href="/assets/js/59.b74aefa9.js"><link rel="prefetch" href="/assets/js/6.d9cecd1a.js"><link rel="prefetch" href="/assets/js/60.9c0c210d.js"><link rel="prefetch" href="/assets/js/61.0c3e63a2.js"><link rel="prefetch" href="/assets/js/62.ff571ccf.js"><link rel="prefetch" href="/assets/js/63.a0bd0859.js"><link rel="prefetch" href="/assets/js/7.42822119.js"><link rel="prefetch" href="/assets/js/9.f0337ea9.js">
    <link rel="stylesheet" href="/assets/css/0.styles.db29028a.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">wangjunget</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  主页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="分类" class="dropdown-title"><span class="title">分类</span> <span class="arrow down"></span></button> <button type="button" aria-label="分类" class="mobile-dropdown-title"><span class="title">分类</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          前端
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/Html/" class="nav-link">
  Html
</a></li><li class="dropdown-subitem"><a href="/JavaScript/" class="nav-link">
  JavaScript
</a></li><li class="dropdown-subitem"><a href="/Css/" class="nav-link">
  Css
</a></li></ul></li><li class="dropdown-item"><h4>
          开发工具
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/Python/" class="nav-link">
  Python
</a></li><li class="dropdown-subitem"><a href="/Git/" class="nav-link">
  Git
</a></li><li class="dropdown-subitem"><a href="/Linux/" class="nav-link">
  Linux
</a></li></ul></li></ul></div></div> <a href="https://github.com/wangjunget/blog-vuepress" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  主页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="分类" class="dropdown-title"><span class="title">分类</span> <span class="arrow down"></span></button> <button type="button" aria-label="分类" class="mobile-dropdown-title"><span class="title">分类</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          前端
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/Html/" class="nav-link">
  Html
</a></li><li class="dropdown-subitem"><a href="/JavaScript/" class="nav-link">
  JavaScript
</a></li><li class="dropdown-subitem"><a href="/Css/" class="nav-link">
  Css
</a></li></ul></li><li class="dropdown-item"><h4>
          开发工具
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/Python/" class="nav-link">
  Python
</a></li><li class="dropdown-subitem"><a href="/Git/" class="nav-link">
  Git
</a></li><li class="dropdown-subitem"><a href="/Linux/" class="nav-link">
  Linux
</a></li></ul></li></ul></div></div> <a href="https://github.com/wangjunget/blog-vuepress" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><a href="/Books/" aria-current="page" class="sidebar-link">概览</a></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Vue.js组件精讲</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/Books/" aria-current="page" class="sidebar-link">概览</a></li><li><a href="/Books/Vue.js%E7%BB%84%E4%BB%B6%E7%B2%BE%E8%AE%B2/Vue%20%E7%9A%84%E6%9E%84%E9%80%A0%E5%99%A8%E2%80%94%E2%80%94extend%20%E4%B8%8E%E6%89%8B%E5%8A%A8%E6%8C%82%E8%BD%BD%E2%80%94%E2%80%94$mount/" class="sidebar-link">Vue 的构造器——extend 与手动挂载——$mount</a></li><li><a href="/Books/Vue.js%E7%BB%84%E4%BB%B6%E7%B2%BE%E8%AE%B2/%E5%86%99%E5%9C%A8%E6%9C%80%E5%90%8E/" class="sidebar-link">写在最后</a></li><li><a href="/Books/Vue.js%E7%BB%84%E4%BB%B6%E7%B2%BE%E8%AE%B2/%E5%9F%BA%E7%A1%80%EF%BC%9AVue.js%20%E7%BB%84%E4%BB%B6%E7%9A%84%E4%B8%89%E4%B8%AA%20API%EF%BC%9Aprop%E3%80%81event%E3%80%81slot/" class="sidebar-link">基础：Vue.js 组件的三个 API：prop、event、slot</a></li><li><a href="/Books/Vue.js%E7%BB%84%E4%BB%B6%E7%B2%BE%E8%AE%B2/%E5%AE%9E%E6%88%98%201%EF%BC%9A%E5%85%B7%E6%9C%89%E6%95%B0%E6%8D%AE%E6%A0%A1%E9%AA%8C%E5%8A%9F%E8%83%BD%E7%9A%84%E8%A1%A8%E5%8D%95%E7%BB%84%E4%BB%B6%E2%80%94%E2%80%94Form/" class="sidebar-link">实战 1：具有数据校验功能的表单组件——Form</a></li><li><a href="/Books/Vue.js%E7%BB%84%E4%BB%B6%E7%B2%BE%E8%AE%B2/%E5%AE%9E%E6%88%98%202%EF%BC%9A%E7%BB%84%E5%90%88%E5%A4%9A%E9%80%89%E6%A1%86%E7%BB%84%E4%BB%B6%E2%80%94%E2%80%94CheckboxGroup%20&amp;%20Checkbox/" class="sidebar-link">实战 2：组合多选框组件——CheckboxGroup &amp; Checkbox</a></li><li><a href="/Books/Vue.js%E7%BB%84%E4%BB%B6%E7%B2%BE%E8%AE%B2/%E5%AE%9E%E6%88%98%203%EF%BC%9A%E5%8A%A8%E6%80%81%E6%B8%B2%E6%9F%93%20.vue%20%E6%96%87%E4%BB%B6%E7%9A%84%E7%BB%84%E4%BB%B6%E2%80%94%E2%80%94%20Display/" aria-current="page" class="active sidebar-link">实战 3：动态渲染 .vue 文件的组件—— Display</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Books/Vue.js%E7%BB%84%E4%BB%B6%E7%B2%BE%E8%AE%B2/%E5%AE%9E%E6%88%98%203%EF%BC%9A%E5%8A%A8%E6%80%81%E6%B8%B2%E6%9F%93%20.vue%20%E6%96%87%E4%BB%B6%E7%9A%84%E7%BB%84%E4%BB%B6%E2%80%94%E2%80%94%20Display/#接口设计" class="sidebar-link">接口设计</a></li><li class="sidebar-sub-header"><a href="/Books/Vue.js%E7%BB%84%E4%BB%B6%E7%B2%BE%E8%AE%B2/%E5%AE%9E%E6%88%98%203%EF%BC%9A%E5%8A%A8%E6%80%81%E6%B8%B2%E6%9F%93%20.vue%20%E6%96%87%E4%BB%B6%E7%9A%84%E7%BB%84%E4%BB%B6%E2%80%94%E2%80%94%20Display/#实现" class="sidebar-link">实现</a></li><li class="sidebar-sub-header"><a href="/Books/Vue.js%E7%BB%84%E4%BB%B6%E7%B2%BE%E8%AE%B2/%E5%AE%9E%E6%88%98%203%EF%BC%9A%E5%8A%A8%E6%80%81%E6%B8%B2%E6%9F%93%20.vue%20%E6%96%87%E4%BB%B6%E7%9A%84%E7%BB%84%E4%BB%B6%E2%80%94%E2%80%94%20Display/#使用" class="sidebar-link">使用</a></li><li class="sidebar-sub-header"><a href="/Books/Vue.js%E7%BB%84%E4%BB%B6%E7%B2%BE%E8%AE%B2/%E5%AE%9E%E6%88%98%203%EF%BC%9A%E5%8A%A8%E6%80%81%E6%B8%B2%E6%9F%93%20.vue%20%E6%96%87%E4%BB%B6%E7%9A%84%E7%BB%84%E4%BB%B6%E2%80%94%E2%80%94%20Display/#结语" class="sidebar-link">结语</a></li><li class="sidebar-sub-header"><a href="/Books/Vue.js%E7%BB%84%E4%BB%B6%E7%B2%BE%E8%AE%B2/%E5%AE%9E%E6%88%98%203%EF%BC%9A%E5%8A%A8%E6%80%81%E6%B8%B2%E6%9F%93%20.vue%20%E6%96%87%E4%BB%B6%E7%9A%84%E7%BB%84%E4%BB%B6%E2%80%94%E2%80%94%20Display/#扩展阅读" class="sidebar-link">扩展阅读</a></li></ul></li><li><a href="/Books/Vue.js%E7%BB%84%E4%BB%B6%E7%B2%BE%E8%AE%B2/%E5%AE%9E%E6%88%98%204%EF%BC%9A%E5%85%A8%E5%B1%80%E6%8F%90%E7%A4%BA%E7%BB%84%E4%BB%B6%E2%80%94%E2%80%94$Alert/" class="sidebar-link">实战 4：全局提示组件——$Alert</a></li><li><a href="/Books/Vue.js%E7%BB%84%E4%BB%B6%E7%B2%BE%E8%AE%B2/%E5%AE%9E%E6%88%98%205%EF%BC%9A%E5%8F%AF%E7%94%A8%20Render%20%E8%87%AA%E5%AE%9A%E4%B9%89%E5%88%97%E7%9A%84%E8%A1%A8%E6%A0%BC%E7%BB%84%E4%BB%B6%E2%80%94%E2%80%94Table/" class="sidebar-link">实战 5：可用 Render 自定义列的表格组件——Table</a></li><li><a href="/Books/Vue.js%E7%BB%84%E4%BB%B6%E7%B2%BE%E8%AE%B2/%E5%AE%9E%E6%88%98%206%EF%BC%9A%E5%8F%AF%E7%94%A8%20slot-scope%20%E8%87%AA%E5%AE%9A%E4%B9%89%E5%88%97%E7%9A%84%E8%A1%A8%E6%A0%BC%E7%BB%84%E4%BB%B6%E2%80%94%E2%80%94Table/" class="sidebar-link">实战 6：可用 slot-scope 自定义列的表格组件——Table</a></li><li><a href="/Books/Vue.js%E7%BB%84%E4%BB%B6%E7%B2%BE%E8%AE%B2/%E5%AE%9E%E6%88%98%207%EF%BC%9A%E6%A0%91%E5%BD%A2%E6%8E%A7%E4%BB%B6%E2%80%94%E2%80%94Tree/" class="sidebar-link">实战 7：树形控件——Tree</a></li><li><a href="/Books/Vue.js%E7%BB%84%E4%BB%B6%E7%B2%BE%E8%AE%B2/%E5%BC%80%E7%AF%87%EF%BC%9AVue.js%20%E7%9A%84%E7%B2%BE%E9%AB%93%E2%80%94%E2%80%94%E7%BB%84%E4%BB%B6/" class="sidebar-link">开篇：Vue.js 的精髓——组件</a></li><li><a href="/Books/Vue.js%E7%BB%84%E4%BB%B6%E7%B2%BE%E8%AE%B2/%E6%8B%93%E5%B1%95%EF%BC%9AVue.js%20%E5%AE%B9%E6%98%93%E5%BF%BD%E7%95%A5%E7%9A%84%20API%20%E8%AF%A6%E8%A7%A3/" class="sidebar-link">拓展：Vue.js 容易忽略的 API 详解</a></li><li><a href="/Books/Vue.js%E7%BB%84%E4%BB%B6%E7%B2%BE%E8%AE%B2/%E6%8B%93%E5%B1%95%EF%BC%9AVue.js%20%E9%9D%A2%E8%AF%95%E3%80%81%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98%E7%AD%94%E7%96%91/" class="sidebar-link">拓展：Vue.js 面试、常见问题答疑</a></li><li><a href="/Books/Vue.js%E7%BB%84%E4%BB%B6%E7%B2%BE%E8%AE%B2/%E6%8B%93%E5%B1%95%EF%BC%9A%E5%A6%82%E4%BD%95%E5%81%9A%E5%A5%BD%E4%B8%80%E4%B8%AA%E5%BC%80%E6%BA%90%E9%A1%B9%E7%9B%AE%EF%BC%88%E4%B8%8A%E7%AF%87%EF%BC%89/" class="sidebar-link">拓展：如何做好一个开源项目（上篇）</a></li><li><a href="/Books/Vue.js%E7%BB%84%E4%BB%B6%E7%B2%BE%E8%AE%B2/%E6%8B%93%E5%B1%95%EF%BC%9A%E5%A6%82%E4%BD%95%E5%81%9A%E5%A5%BD%E4%B8%80%E4%B8%AA%E5%BC%80%E6%BA%90%E9%A1%B9%E7%9B%AE%EF%BC%88%E4%B8%8B%E7%AF%87%EF%BC%89/" class="sidebar-link">拓展：如何做好一个开源项目（下篇）</a></li><li><a href="/Books/Vue.js%E7%BB%84%E4%BB%B6%E7%B2%BE%E8%AE%B2/%E6%9B%B4%E7%81%B5%E6%B4%BB%E7%9A%84%E7%BB%84%E4%BB%B6%EF%BC%9ARender%20%E5%87%BD%E6%95%B0%E4%B8%8E%20Functional%20Render/" class="sidebar-link">更灵活的组件：Render 函数与 Functional Render</a></li><li><a href="/Books/Vue.js%E7%BB%84%E4%BB%B6%E7%B2%BE%E8%AE%B2/%E7%BB%84%E4%BB%B6%E7%9A%84%E9%80%9A%E4%BF%A1%201%EF%BC%9Aprovide%20%20%20inject/" class="sidebar-link">组件的通信 1：provide   inject</a></li><li><a href="/Books/Vue.js%E7%BB%84%E4%BB%B6%E7%B2%BE%E8%AE%B2/%E7%BB%84%E4%BB%B6%E7%9A%84%E9%80%9A%E4%BF%A1%202%EF%BC%9A%E6%B4%BE%E5%8F%91%E4%B8%8E%E5%B9%BF%E6%92%AD%E2%80%94%E2%80%94%E8%87%AA%E8%A1%8C%E5%AE%9E%E7%8E%B0%20dispatch%20%E5%92%8C%20broadcast%20%E6%96%B9%E6%B3%95/" class="sidebar-link">组件的通信 2：派发与广播——自行实现 dispatch 和 broadcast 方法</a></li><li><a href="/Books/Vue.js%E7%BB%84%E4%BB%B6%E7%B2%BE%E8%AE%B2/%E7%BB%84%E4%BB%B6%E7%9A%84%E9%80%9A%E4%BF%A1%203%EF%BC%9A%E6%89%BE%E5%88%B0%E4%BB%BB%E6%84%8F%E7%BB%84%E4%BB%B6%E5%AE%9E%E4%BE%8B%E2%80%94%E2%80%94findComponents%20%E7%B3%BB%E5%88%97%E6%96%B9%E6%B3%95/" class="sidebar-link">组件的通信 3：找到任意组件实例——findComponents 系列方法</a></li><li><a href="/Books/Vue.js%E7%BB%84%E4%BB%B6%E7%B2%BE%E8%AE%B2/%E9%80%92%E5%BD%92%E7%BB%84%E4%BB%B6%E4%B8%8E%E5%8A%A8%E6%80%81%E7%BB%84%E4%BB%B6/" class="sidebar-link">递归组件与动态组件</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="实战-3-动态渲染-vue-文件的组件-display"><a href="#实战-3-动态渲染-vue-文件的组件-display" class="header-anchor">#</a> 实战 3：动态渲染 .vue 文件的组件—— Display</h1> <p>你可能用过 <a href="https://jsfiddle.net/" target="_blank" rel="noopener noreferrer">jsfiddle<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 或 <a href="https://jsbin.com" target="_blank" rel="noopener noreferrer">jsbin<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 之类的网站，在里面你可以用 CDN 的形式引入 Vue.js，然后在线写示例，实时运行，比如下面这个例子：</p> <p><a href="https://jsfiddle.net/c87yh92v/" target="_blank" rel="noopener noreferrer">https://jsfiddle.net/c87yh92v/<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>不过，这类网站主要是一个 html，里面包含 js、css 部分，渲染侧是用 iframe 嵌入你编写的 html，并实时更新。在这些网站写示例，是不能直接写 <code>.vue</code> 文件的，因为没法进行编译。</p> <p>再来看另一个网站 <a href="https://run.iviewui.com/" target="_blank" rel="noopener noreferrer">iView Run<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>（之前小节也有提到），它是能够在线编写一个标准的 <code>.vue</code> 文件，并及时渲染的，它也预置了 iView 环境，你可以使用 iView 组件库全部的组件。本小节，我们就来实现这样一个能够动态渲染 .vue 文件的 <code>Display</code> 组件，当然，用到的核心技术就是上一节的 <code>extend</code> 和 <code>$mount</code>。</p> <h2 id="接口设计"><a href="#接口设计" class="header-anchor">#</a> 接口设计</h2> <p>一个常规的 <code>.vue</code> 文件一般都会包含 3 个部分：</p> <ul><li><code>&lt;template&gt;</code>：组件的模板；</li> <li><code>&lt;script&gt;</code>：组件的选项，不包含 <code>el</code>；</li> <li><code>&lt;style&gt;</code>：CSS 样式。</li></ul> <p>回忆一下用 <code>extend</code> 来构造一个组件实例，它的选项 <code>template</code> 其实就是上面 <code>&lt;template&gt;</code> 的内容，其余选项对应的是 <code>&lt;script&gt;</code>，样式 <code>&lt;style&gt;</code> 事实上与 Vue.js 无关，我们可以先不管。这样的话，当拿到一个 .vue 的文件（整体其实是字符串），只需要把 <code>&lt;template&gt;</code>、<code>&lt;script&gt;</code>、<code>&lt;style&gt;</code> 使用正则分割，把对应的部分传递给 extend 创建的实例就可以。</p> <p>Display 是一个功能型的组件，没有交互和事件，只需要一个 prop：code 将 .vue 的内容传递过来，其余工作都是在组件内完成的，这对使用者很友好。当然，你也可以设计成三个 props，分别对应 html、js、css，那分割的工作就要使用者来完成。出于使用者优先原则，苦活累活当然是在组件内完成了，因此推荐第一个方案。</p> <h2 id="实现"><a href="#实现" class="header-anchor">#</a> 实现</h2> <p>在 <code>src/components</code> 目录下创建 <code>display</code> 目录，并新建 <code>display.vue</code> 文件，基本结构如下：</p> <div class="language- extra-class"><pre class="language-text"><code>&lt;!-- display.vue --&gt;
&lt;template&gt;
  &lt;div ref=&quot;display&quot;&gt;&lt;/div&gt;
&lt;/template&gt;
&lt;script&gt;
  export default {
    props: {
      code: {
        type: String,
        default: ''
      }
    },
    data () {
      return {
        html: '',
        js: '',
        css: ''
      }
    },
  }
&lt;/script&gt;

</code></pre></div><p>父级传递 <code>code</code> 后，将其分割，并保存在 data 的 html、js、css 中，后续使用。</p> <p>我们使用正则，基于 <code>&lt;&gt;</code> 和 <code>&lt;/&gt;</code> 的特性进行分割：</p> <div class="language- extra-class"><pre class="language-text"><code>// display.vue，部分代码省略
export default {
  methods: {
    getSource (source, type) {
      const regex = new RegExp(`&lt;${type}[^&gt;]*&gt;`);
      let openingTag = source.match(regex);

      if (!openingTag) return '';
      else openingTag = openingTag[0];

      return source.slice(source.indexOf(openingTag) + openingTag.length, source.lastIndexOf(`&lt;/${type}&gt;`));
    },
    splitCode () {
      const script = this.getSource(this.code, 'script').replace(/export default/, 'return ');
      const style = this.getSource(this.code, 'style');
      const template = '&lt;div id=&quot;app&quot;&gt;' + this.getSource(this.code, 'template') + '&lt;/div&gt;';

      this.js = script;
      this.css = style;
      this.html = template;
    },
  }
}

</code></pre></div><p>getSource 方法接收两个参数：</p> <ul><li>source：.vue 文件代码，即 props: code；</li> <li>type：分割的部分，也就是 template、script、style。</li></ul> <p>分割后，返回的内容不再包含 <code>&lt;template&gt;</code> 等标签，直接是对应的内容，在 splitCode 方法中，把分割好的代码分别赋值给 data 中声明的 html、js、css。有两个细节需要注意：</p> <ol><li>.vue 的 <code>&lt;script&gt;</code> 部分一般都是以 <code>export default</code> 开始的，可以看到在 splitCode 方法中将它替换为了 <code>return</code>，这个在后文会做解释，当前只要注意，我们分割完的代码，仍然是字符串；</li> <li>在分割的 <code>&lt;template&gt;</code> 外层套了一个 <code>&lt;div id=&quot;app&quot;&gt;</code>，这是为了容错，有时使用者传递的 <code>code</code> 可能会忘记在外层包一个节点，没有根节点的组件，是会报错的。</li></ol> <p>准备好这些基础工作后，就可以用 <code>extend</code> 渲染组件了，在这之前，我们先思考一个问题：上文说到，当前的 <code>this.js</code> 是字符串，而 extend 接收的选项可不是字符串，而是一个对象类型，那就要先把 this.js 转为一个对象。</p> <p>不卖关子，来介绍 <code>new Function</code> 用法，先看个示例：</p> <div class="language- extra-class"><pre class="language-text"><code>const sum = new Function('a', 'b', 'return a + b');

console.log(sum(2, 6)); // 8

</code></pre></div><p>new Function 的语法：</p> <div class="language- extra-class"><pre class="language-text"><code>new Function ([arg1[, arg2[, ...argN]],] functionBody)

</code></pre></div><p>arg1, arg2, ... argN 是被函数使用的参数名称，<strong>functionBody</strong> 是一个含有包括函数定义的 JavaScript 语句的<strong>字符串</strong>。也就是说，示例中的字符串 <code>return a + b</code> 被当做语句执行了。</p> <p>上文说到，<code>this.js</code> 中是将 <em>export default</em> 替换为 <em>return</em> 的，如果将 this.js 传入 new Function 里，那么 this.js 就执行了，这时因为有 return，返回的就是一个对象类型的 this.js 了。</p> <p>如果你还不是很理解 new Function，可以到文末的扩展阅读进一步了解。除了 new Function，你熟悉的 <code>eval</code> 函数也可以使用，它与 new Function 功能类似。</p> <p>知道了这些，下面的内容就容易理解了：</p> <div class="language- extra-class"><pre class="language-text"><code>&lt;!-- display.vue，部分代码省略 --&gt;
&lt;template&gt;
  &lt;div ref=&quot;display&quot;&gt;&lt;/div&gt;
&lt;/template&gt;
&lt;script&gt;
  import Vue from 'vue';
  
  export default {
    data () {
      return {
        component: null
      }
    },
    methods: {
      renderCode () {
        this.splitCode();

        if (this.html !== '' &amp;&amp; this.js !== '') {
          const parseStrToFunc = new Function(this.js)();

          parseStrToFunc.template =  this.html;
          const Component = Vue.extend( parseStrToFunc );
          this.component = new Component().$mount();

          this.$refs.display.appendChild(this.component.$el);
        }
      }
    },
    mounted () {
      this.renderCode();
    }
  }
&lt;/script&gt;

</code></pre></div><p>extend 构造的实例通过 $mount 渲染后，挂载到了组件唯一的一个节点 <code>&lt;div ref=&quot;display&quot;&gt;</code> 上。</p> <p>现在 html 和 js 都有了，还剩下 css。加载 css 没有什么奇技淫巧，就是创建一个 <code>&lt;style&gt;</code> 标签，然后把 css 写进去，再插入到页面的 <code>&lt;head&gt;</code> 中，这样 css 就被浏览器解析了。为了便于后面在 <code>this.code</code> 变化或组件销毁时移除动态创建的 <code>&lt;style&gt;</code> 标签，我们给每个 style 标签加一个随机 id 用于标识。</p> <p>在 <code>src/utils</code> 目录下新建 <code>random_str.js</code> 文件，并写入以下内容：</p> <div class="language- extra-class"><pre class="language-text"><code>// 生成随机字符串
export default function (len = 32) {
  const $chars = 'abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890';
  const maxPos = $chars.length;
  let str = '';
  for (let i = 0; i &lt; len; i++) {
    str += $chars.charAt(Math.floor(Math.random() * maxPos));
  }
  return str;
}

</code></pre></div><p>不难理解，这个方法是从指定的 a-zA-Z0-9 中随机生成 32 位的字符串。</p> <p>补全 renderCode 方法：</p> <div class="language- extra-class"><pre class="language-text"><code>// display.vue，部分代码省略
import randomStr from '../../utils/random_str.js';

export default {
  data () {
    return {
      id: randomStr()
    }
  },
  methods: {
    renderCode () {
      if (this.html !== '' &amp;&amp; this.js !== '') {
        // ...
        if (this.css !== '') {
          const style = document.createElement('style');
          style.type = 'text/css';
          style.id = this.id;
          style.innerHTML = this.css;
          document.getElementsByTagName('head')[0].appendChild(style);
        }
      }
    }
  }
}

</code></pre></div><p>当 Display 组件销毁时，也要手动销毁 extend 创建的实例以及上面的 css：</p> <div class="language- extra-class"><pre class="language-text"><code>// display.vue，部分代码省略
export default {
  methods: {
    destroyCode () {
      const $target = document.getElementById(this.id);
      if ($target) $target.parentNode.removeChild($target);

      if (this.component) {
        this.$refs.display.removeChild(this.component.$el);
        this.component.$destroy();
        this.component = null;
      }
    }
  },
  beforeDestroy () {
    this.destroyCode();
  }
}

</code></pre></div><p>当 <code>this.code</code> 更新时，整个过程要重新来一次，所以要对 <code>code</code> 进行 watch 监听：</p> <div class="language- extra-class"><pre class="language-text"><code>// display.vue，部分代码省略
export default {
  watch: {
    code () {
      this.destroyCode();
      this.renderCode();
    }
  }
}

</code></pre></div><p>以上就是 Display 组件的所有内容。</p> <h2 id="使用"><a href="#使用" class="header-anchor">#</a> 使用</h2> <p>新建一条路由，并在 <code>src/views</code> 下新建页面 <code>display.vue</code> 来使用 Display 组件：</p> <div class="language- extra-class"><pre class="language-text"><code>&lt;!-- src/views/display.vue --&gt;
&lt;template&gt;
  &lt;div&gt;
    &lt;h3&gt;动态渲染 .vue 文件的组件—— Display&lt;/h3&gt;

    &lt;i-display :code=&quot;code&quot;&gt;&lt;/i-display&gt;
  &lt;/div&gt;
&lt;/template&gt;
&lt;script&gt;
  import iDisplay from '../components/display/display.vue';
  import defaultCode from './default-code.js';

  export default {
    components: { iDisplay },
    data () {
      return {
        code: defaultCode
      }
    }
  }
&lt;/script&gt;

</code></pre></div><div class="language- extra-class"><pre class="language-text"><code>// src/views/default-code.js
const code =
`&lt;template&gt;
    &lt;div&gt;
        &lt;input v-model=&quot;message&quot;&gt;
        {{ message }}
    &lt;/div&gt;
&lt;/template&gt;
&lt;script&gt;
    export default {
        data () {
            return {
                message: ''
            }
        }
    }
&lt;/script&gt;`;

export default code;

</code></pre></div><p>如果使用的是 Vue CLI 3 默认的配置，直接运行时，会抛出下面的错误：</p> <blockquote><p>[Vue warn]: You are using the runtime-only build of Vue where the template compiler is not available. Either pre-compile the templates into render functions, or use the compiler-included build.</p></blockquote> <p>这涉及到另一个知识点，就是 Vue.js 的版本。在使用 Vue.js 2 时，有独立构建（standalone）和运行时构建（runtime-only）两种版本可供选择，详细的介绍请阅读文末扩展阅读 2。</p> <p>Vue CLI 3 默认使用了 vue.runtime.js，它不允许编译 template 模板，因为我们在 Vue.extend 构造实例时，用了 <code>template</code> 选项，所以会报错。解决方案有两种，一是手动将 template 改写为 Render 函数，但这成本太高；另一种是对 Vue CLI 3 创建的工程做简单的配置。我们使用后者。</p> <p>在项目根目录，新建文件 <code>vue.config.js</code>：</p> <div class="language- extra-class"><pre class="language-text"><code>module.exports = {
  runtimeCompiler: true
};

</code></pre></div><p>它的作用是，是否使用包含运行时编译器的 Vue 构建版本。设置为 <code>true</code> 后就可以在 Vue 组件中使用 <code>template</code> 选项了，但是应用额外增加 10kb 左右（还好吧）。</p> <p>加了这个配置，报错就消失了，组件也能正常显示。</p> <p>以上就是 Display 组件所有的内容，如果你感兴趣，可以把它进一步封装，做成 iView Run 这样的产品。</p> <h2 id="结语"><a href="#结语" class="header-anchor">#</a> 结语</h2> <p>这个小小的 Display 组件，能做的事还有很多，比如要写一套 Vue 组件库的文档，传统方法是在开发环境写一个个的 .vue 文件，然后编译打包、上传资源、上线，如果要修改，哪怕一个标点符号，都要重新编译打包、上传资源、上线。有了 Display 组件，只需要提供一个服务来在线修改文档的 .vue，就能实时更新，不用打包、上传、上线。</p> <p>还有一点很重要的是，可以看到，在 iView Run 里，默认是直接可以写 iView 组件库的全部组件，并没有额外引入，这是因为 Display 所在的工程，已经将 iView 安装在了全局，Vue.extend 在构造实例时，已经可以使用全局安装的插件了，如果你还全局安装了其它插件，比如 axios，都是可以直接使用的。</p> <h2 id="扩展阅读"><a href="#扩展阅读" class="header-anchor">#</a> 扩展阅读</h2> <ul><li><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Function" target="_blank" rel="noopener noreferrer">new Function<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://jingsam.github.io/2016/10/23/standalone-vs-runtime-only-build-in-vuejs2.html" target="_blank" rel="noopener noreferrer">Vue.js 2.0 独立构建和运行时构建的区别<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">最近更新:</span> <span class="time">2020-01-03 03:19:42</span></div></footer> <!----> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.6215b15e.js" defer></script><script src="/assets/js/8.5391eac4.js" defer></script><script src="/assets/js/1.97d2ef8e.js" defer></script><script src="/assets/js/2.ac1a40e0.js" defer></script><script src="/assets/js/18.33cee044.js" defer></script>
  </body>
</html>
